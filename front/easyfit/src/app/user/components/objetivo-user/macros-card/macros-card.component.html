<div class="card-macros">
  @if (form) {
    <form [formGroup]="form" (ngSubmit)="onSubmit()">

      <!-- Calorías objetivo -->
      <div class="fila-calorias">
        <span class="titulo">Calorías objetivo</span>
        <span class="titulo-unidad">{{ valores.kcalObjetivo }} Kcal</span>
      </div>

      <!-- Macronutrientes -->
      <h2 class="titulo">Macronutrientes</h2>
      <p class="subtitulo">Ajusta el porcentaje de tus macros al 100%</p>

      <!-- Proteínas -->
      <div class="linea-formulario">
        <label class="titulo2" for="proteinas">Proteínas (%)</label>
        <select formControlName="porcentajeProteinas" id="proteinas">
          @for (opcion of valoresOpcionales; track opcion) {
            <option [value]="opcion">{{ opcion }}%</option>
          }
        </select>
      </div>

      <!-- Carbohidratos -->
      <div class="linea-formulario">
        <label class="titulo2" for="carbohidratos">Carbohidratos (%)</label>
        <select formControlName="porcentajeCarbohidratos" id="carbohidratos">
          @for (opcion of valoresOpcionales; track opcion) {
            <option [value]="opcion">{{ opcion }}%</option>
          }
        </select>
      </div>

      <!-- Grasas -->
      <div class="linea-formulario">
        <label class="titulo2" for="grasas">Grasas (%)</label>
        <select formControlName="porcentajeGrasas" id="grasas">
          @for (opcion of valoresOpcionales; track opcion) {
            <option [value]="opcion">{{ opcion }}%</option>
          }
        </select>
      </div>

      <!-- Suma total -->
      <div class="suma mt-4" [class.error]="sumaTotal !== 100">
        Total: {{ sumaTotal }}%
      </div>

      <!-- Botón -->
      <div class="acciones">
        <button type="submit" [disabled]="form.invalid || sumaTotal !== 100">Guardar</button>
      </div>
    </form>
  }
</div>
